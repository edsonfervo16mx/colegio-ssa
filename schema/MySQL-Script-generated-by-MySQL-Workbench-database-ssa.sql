-- MySQL Script generated by MySQL Workbench
-- mi√© 07 jun 2017 18:11:32 CDT
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema ssa_jeanpiaget
-- -----------------------------------------------------
-- sistema de seguimiento academico

-- -----------------------------------------------------
-- Schema ssa_jeanpiaget
--
-- sistema de seguimiento academico
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `ssa_jeanpiaget` DEFAULT CHARACTER SET utf8 ;
USE `ssa_jeanpiaget` ;

-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`colegio`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`colegio` (
  `cve_colegio` VARCHAR(70) NOT NULL,
  `nombre_colegio` VARCHAR(100) NOT NULL,
  `status_colegio` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_colegio`))
ENGINE = InnoDB
COMMENT = 'Tabla de Datos Generales del Colegio';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`campus`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`campus` (
  `cve_campus` VARCHAR(70) NOT NULL,
  `nombre_campus` VARCHAR(100) NOT NULL,
  `logo_campus` VARCHAR(200) NOT NULL,
  `telefono_campus` VARCHAR(20) NULL,
  `correo_campus` VARCHAR(200) NULL,
  `direccion_campus` VARCHAR(250) NULL,
  `descripcion_campus` VARCHAR(400) NULL,
  `cve_colegio` VARCHAR(70) NOT NULL,
  `status_campus` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_campus`),
  INDEX `fk_campus_preescolar_colegio1_idx` (`cve_colegio` ASC),
  CONSTRAINT `fk_campus_preescolar_colegio1`
    FOREIGN KEY (`cve_colegio`)
    REFERENCES `ssa_jeanpiaget`.`colegio` (`cve_colegio`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'Campus Preescolar';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`ciclo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`ciclo` (
  `cve_ciclo` VARCHAR(70) NOT NULL,
  `nombre_ciclo` VARCHAR(100) NOT NULL,
  `inicio_ciclo` DATE NULL,
  `fin_ciclo` DATE NULL,
  `cve_campus` VARCHAR(70) NOT NULL,
  `status_ciclo` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_ciclo`),
  INDEX `fk_ciclo_preescolar_campus_preescolar1_idx` (`cve_campus` ASC),
  CONSTRAINT `fk_ciclo_preescolar_campus_preescolar1`
    FOREIGN KEY (`cve_campus`)
    REFERENCES `ssa_jeanpiaget`.`campus` (`cve_campus`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'Tabla de ciclo escolar';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`cat_sexo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`cat_sexo` (
  `cve_sexo` VARCHAR(20) NOT NULL,
  `status_sexo` VARCHAR(20) NOT NULL DEFAULT 'active',
  PRIMARY KEY (`cve_sexo`))
ENGINE = InnoDB
COMMENT = 'Categorias Sexo';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`alumno`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`alumno` (
  `curp_alumno` VARCHAR(70) NOT NULL,
  `nombre_alumno` VARCHAR(100) NOT NULL,
  `apellidop_alumno` VARCHAR(100) NOT NULL,
  `apellidom_alumno` VARCHAR(100) NOT NULL,
  `foto_alumno` VARCHAR(200) NULL,
  `direccion_alumno` VARCHAR(250) NULL,
  `nacimiento_alumno` DATE NULL,
  `correo_alumno` VARCHAR(250) NULL,
  `telefono_alumno` VARCHAR(20) NULL,
  `observaciones_alumno` VARCHAR(250) NULL,
  `cve_sexo` VARCHAR(20) NOT NULL,
  `cve_campus` VARCHAR(70) NOT NULL,
  `status_alumno` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`curp_alumno`),
  INDEX `fk_alumno_preescolar_campus_preescolar1_idx` (`cve_campus` ASC),
  INDEX `fk_alumno_preescolar_cat_sexo1_idx` (`cve_sexo` ASC),
  CONSTRAINT `fk_alumno_preescolar_campus_preescolar1`
    FOREIGN KEY (`cve_campus`)
    REFERENCES `ssa_jeanpiaget`.`campus` (`cve_campus`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_alumno_preescolar_cat_sexo1`
    FOREIGN KEY (`cve_sexo`)
    REFERENCES `ssa_jeanpiaget`.`cat_sexo` (`cve_sexo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'Tabla de Alumnos';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`grupo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`grupo` (
  `cve_grupo` VARCHAR(70) NOT NULL,
  `cve_ciclo` VARCHAR(70) NOT NULL,
  `status_grupo` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_grupo`),
  INDEX `fk_grupo_preescolar_ciclo_preescolar1_idx` (`cve_ciclo` ASC),
  CONSTRAINT `fk_grupo_preescolar_ciclo_preescolar1`
    FOREIGN KEY (`cve_ciclo`)
    REFERENCES `ssa_jeanpiaget`.`ciclo` (`cve_ciclo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'Tabla de Grupos';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`cat_mes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`cat_mes` (
  `cve_mes` VARCHAR(70) NOT NULL,
  `status_mes` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_mes`))
ENGINE = InnoDB
COMMENT = 'tabla de meses';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`cat_estado_pago`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`cat_estado_pago` (
  `cve_estado_pago` VARCHAR(70) NOT NULL,
  `status_estado_pago` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_estado_pago`))
ENGINE = InnoDB
COMMENT = 'Categorias de los estados de los pagos';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`constructor_grupo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`constructor_grupo` (
  `cve_constructor_grupo` VARCHAR(70) NOT NULL,
  `cve_grupo` VARCHAR(70) NOT NULL,
  `curp_alumno` VARCHAR(70) NOT NULL,
  `status_constructor_grupo` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_constructor_grupo`),
  INDEX `fk_constructor_grupo_preescolar_alumno_preescolar1_idx` (`curp_alumno` ASC),
  INDEX `fk_constructor_grupo_preescolar_grupo_preescolar1_idx` (`cve_grupo` ASC),
  CONSTRAINT `fk_constructor_grupo_preescolar_alumno_preescolar1`
    FOREIGN KEY (`curp_alumno`)
    REFERENCES `ssa_jeanpiaget`.`alumno` (`curp_alumno`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_constructor_grupo_preescolar_grupo_preescolar1`
    FOREIGN KEY (`cve_grupo`)
    REFERENCES `ssa_jeanpiaget`.`grupo` (`cve_grupo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'Tabla de Contructor de grupo, REL_GRUPO_ALUMNO';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`tutor`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`tutor` (
  `cve_tutor` VARCHAR(70) NOT NULL,
  `nombre_tutor` VARCHAR(100) NOT NULL,
  `apellidop_tutor` VARCHAR(100) NOT NULL,
  `apellidom_tutor` VARCHAR(100) NOT NULL,
  `correo_tutor` VARCHAR(250) NULL,
  `telefono_tutor` VARCHAR(20) NULL,
  `observaciones_tutor` VARCHAR(250) NULL,
  `status_tutor` VARCHAR(20) NULL DEFAULT 'active',
  `cve_sexo` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`cve_tutor`),
  INDEX `fk_tutor_preescolar_cat_sexo1_idx` (`cve_sexo` ASC),
  CONSTRAINT `fk_tutor_preescolar_cat_sexo1`
    FOREIGN KEY (`cve_sexo`)
    REFERENCES `ssa_jeanpiaget`.`cat_sexo` (`cve_sexo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'Tabla de tutores y/o Padres de Familia';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`relacion`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`relacion` (
  `cve_relacion` VARCHAR(70) NOT NULL,
  `curp_alumno` VARCHAR(70) NOT NULL,
  `cve_tutor` VARCHAR(70) NOT NULL,
  `status_relacion` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_relacion`),
  INDEX `fk_relacion_preescolar_alumno_preescolar1_idx` (`curp_alumno` ASC),
  INDEX `fk_relacion_preescolar_tutor_preescolar1_idx` (`cve_tutor` ASC),
  CONSTRAINT `fk_relacion_preescolar_alumno_preescolar1`
    FOREIGN KEY (`curp_alumno`)
    REFERENCES `ssa_jeanpiaget`.`alumno` (`curp_alumno`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_relacion_preescolar_tutor_preescolar1`
    FOREIGN KEY (`cve_tutor`)
    REFERENCES `ssa_jeanpiaget`.`tutor` (`cve_tutor`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'Tabla de relaciones entre alumno y tutor';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`cat_metodo_pago`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`cat_metodo_pago` (
  `cve_metodo_pago` VARCHAR(70) NOT NULL,
  `status_metodo_pago` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_metodo_pago`))
ENGINE = InnoDB
COMMENT = 'Tabla de metodos de pago';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`precio_colegiatura`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`precio_colegiatura` (
  `cve_precio_colegiatura` VARCHAR(70) NOT NULL,
  `titulo_precio_colegiatura` VARCHAR(100) NOT NULL,
  `monto_precio_colegiatura` FLOAT NOT NULL,
  `meses_precio_colegiatura` INT NOT NULL,
  `detalle_precio_colegiatura` VARCHAR(250) NULL,
  `cve_ciclo` VARCHAR(70) NOT NULL,
  `status_precio_colegiatura` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_precio_colegiatura`),
  INDEX `fk_precio_colegiatura_preescolar_ciclo_preescolar1_idx` (`cve_ciclo` ASC),
  CONSTRAINT `fk_precio_colegiatura_preescolar_ciclo_preescolar1`
    FOREIGN KEY (`cve_ciclo`)
    REFERENCES `ssa_jeanpiaget`.`ciclo` (`cve_ciclo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'Tabla de Precios de las Colegiaturas';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`cuenta_colegiatura`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`cuenta_colegiatura` (
  `cve_cuenta_colegiatura` INT NOT NULL AUTO_INCREMENT,
  `folio_cuenta_colegiatura` VARCHAR(70) NOT NULL,
  `fecha_cuenta_colegiatura` DATE NOT NULL,
  `descripcion_cuenta_colegiatura` VARCHAR(250) NULL,
  `cve_precio_colegiatura` VARCHAR(70) NOT NULL,
  `cve_constructor_grupo` VARCHAR(70) NOT NULL,
  `cve_estado_pago` VARCHAR(70) NOT NULL,
  `status_cuenta_colegiatura` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_cuenta_colegiatura`),
  INDEX `fk_cuenta_colegiatura_preescolar_precio_colegiatura_preesco_idx` (`cve_precio_colegiatura` ASC),
  INDEX `fk_cuenta_colegiatura_preescolar_constructor_grupo_preescol_idx` (`cve_constructor_grupo` ASC),
  INDEX `fk_cuenta_colegiatura_preescolar_cat_estado_pago1_idx` (`cve_estado_pago` ASC),
  CONSTRAINT `fk_cuenta_colegiatura_preescolar_precio_colegiatura_preescolar1`
    FOREIGN KEY (`cve_precio_colegiatura`)
    REFERENCES `ssa_jeanpiaget`.`precio_colegiatura` (`cve_precio_colegiatura`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_cuenta_colegiatura_preescolar_constructor_grupo_preescolar1`
    FOREIGN KEY (`cve_constructor_grupo`)
    REFERENCES `ssa_jeanpiaget`.`constructor_grupo` (`cve_constructor_grupo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_cuenta_colegiatura_preescolar_cat_estado_pago1`
    FOREIGN KEY (`cve_estado_pago`)
    REFERENCES `ssa_jeanpiaget`.`cat_estado_pago` (`cve_estado_pago`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'Tabla de cuenta general de colegiaturas';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`usuario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`usuario` (
  `nombre_usuario` VARCHAR(100) NOT NULL,
  `password_usuario` VARCHAR(200) NOT NULL,
  `descripcion_usuario` VARCHAR(250) NULL,
  `privilegio_usuario` VARCHAR(20) NULL,
  `status_usuario` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`nombre_usuario`))
ENGINE = InnoDB
COMMENT = 'Tabla de Usuarios del Sistema';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`abono_colegiatura`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`abono_colegiatura` (
  `cve_abono_colegiatura` INT NOT NULL AUTO_INCREMENT,
  `fecha_abono_colegiatura` DATE NOT NULL,
  `deposito_abono_colegiatura` FLOAT NOT NULL,
  `detalle_abono_colegiatura` VARCHAR(250) NULL,
  `status_abono_colegiatura` VARCHAR(20) NULL DEFAULT 'active',
  `cve_cuenta_colegiatura` INT NOT NULL,
  `cve_estado_pago` VARCHAR(70) NOT NULL,
  `cve_metodo_pago` VARCHAR(70) NOT NULL,
  `nombre_usuario` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`cve_abono_colegiatura`),
  INDEX `fk_abono_colegiatura_cuenta_colegiatura_preescolar1_idx` (`cve_cuenta_colegiatura` ASC),
  INDEX `fk_abono_colegiatura_cat_estado_pago1_idx` (`cve_estado_pago` ASC),
  INDEX `fk_abono_colegiatura_cat_metodo_pago1_idx` (`cve_metodo_pago` ASC),
  INDEX `fk_abono_colegiatura_preescolar_usuario1_idx` (`nombre_usuario` ASC),
  CONSTRAINT `fk_abono_colegiatura_cuenta_colegiatura_preescolar1`
    FOREIGN KEY (`cve_cuenta_colegiatura`)
    REFERENCES `ssa_jeanpiaget`.`cuenta_colegiatura` (`cve_cuenta_colegiatura`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_abono_colegiatura_cat_estado_pago1`
    FOREIGN KEY (`cve_estado_pago`)
    REFERENCES `ssa_jeanpiaget`.`cat_estado_pago` (`cve_estado_pago`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_abono_colegiatura_cat_metodo_pago1`
    FOREIGN KEY (`cve_metodo_pago`)
    REFERENCES `ssa_jeanpiaget`.`cat_metodo_pago` (`cve_metodo_pago`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_abono_colegiatura_preescolar_usuario1`
    FOREIGN KEY (`nombre_usuario`)
    REFERENCES `ssa_jeanpiaget`.`usuario` (`nombre_usuario`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'Tabla de abonos a la colegiatura';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`rel_abono_mes`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`rel_abono_mes` (
  `cve_rel_abono_mes` INT NOT NULL AUTO_INCREMENT,
  `cve_abono_colegiatura` INT NOT NULL,
  `cve_mes` VARCHAR(70) NOT NULL,
  `status_rel_abono_mes` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_rel_abono_mes`),
  INDEX `fk_rel_abono_mes_preescolar_abono_colegiatura_preescolar1_idx` (`cve_abono_colegiatura` ASC),
  INDEX `fk_rel_abono_mes_preescolar_cat_mes1_idx` (`cve_mes` ASC),
  CONSTRAINT `fk_rel_abono_mes_preescolar_abono_colegiatura_preescolar1`
    FOREIGN KEY (`cve_abono_colegiatura`)
    REFERENCES `ssa_jeanpiaget`.`abono_colegiatura` (`cve_abono_colegiatura`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_rel_abono_mes_preescolar_cat_mes1`
    FOREIGN KEY (`cve_mes`)
    REFERENCES `ssa_jeanpiaget`.`cat_mes` (`cve_mes`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'Tabla de RELACION entre el abono y el mes o los meses a cobrar';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`precio_inscripcion`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`precio_inscripcion` (
  `cve_precio_inscripcion` VARCHAR(70) NOT NULL,
  `titulo_precio_inscripcion` VARCHAR(100) NOT NULL,
  `monto_precio_inscripcion` FLOAT NOT NULL,
  `detalle_precio_inscripcion` VARCHAR(250) NULL,
  `cve_ciclo` VARCHAR(70) NOT NULL,
  `status_precio_inscripcion` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_precio_inscripcion`),
  INDEX `fk_precio_inscripcion_preescolar_ciclo_preescolar1_idx` (`cve_ciclo` ASC),
  CONSTRAINT `fk_precio_inscripcion_preescolar_ciclo_preescolar1`
    FOREIGN KEY (`cve_ciclo`)
    REFERENCES `ssa_jeanpiaget`.`ciclo` (`cve_ciclo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'Tabla de precios de Inscripcion';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`cuenta_inscripcion`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`cuenta_inscripcion` (
  `cve_cuenta_inscripcion` INT NOT NULL AUTO_INCREMENT,
  `folio_cuenta_inscripcion` VARCHAR(70) NOT NULL,
  `fecha_cuenta_inscripcion` DATE NOT NULL,
  `descripcion_cuenta_inscripcion` VARCHAR(250) NULL,
  `cve_precio_inscripcion` VARCHAR(70) NOT NULL,
  `cve_constructor_grupo` VARCHAR(70) NOT NULL,
  `cve_estado_pago` VARCHAR(70) NOT NULL,
  `status_cuenta_inscripcion` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_cuenta_inscripcion`),
  INDEX `fk_cuenta_inscripcion_preescolar_precio_inscripcion_preesco_idx` (`cve_precio_inscripcion` ASC),
  INDEX `fk_cuenta_inscripcion_preescolar_constructor_grupo_preescol_idx` (`cve_constructor_grupo` ASC),
  INDEX `fk_cuenta_inscripcion_preescolar_cat_estado_pago1_idx` (`cve_estado_pago` ASC),
  CONSTRAINT `fk_cuenta_inscripcion_preescolar_precio_inscripcion_preescolar1`
    FOREIGN KEY (`cve_precio_inscripcion`)
    REFERENCES `ssa_jeanpiaget`.`precio_inscripcion` (`cve_precio_inscripcion`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_cuenta_inscripcion_preescolar_constructor_grupo_preescolar1`
    FOREIGN KEY (`cve_constructor_grupo`)
    REFERENCES `ssa_jeanpiaget`.`constructor_grupo` (`cve_constructor_grupo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_cuenta_inscripcion_preescolar_cat_estado_pago1`
    FOREIGN KEY (`cve_estado_pago`)
    REFERENCES `ssa_jeanpiaget`.`cat_estado_pago` (`cve_estado_pago`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'Tabla de cuentas generales de inscripcion';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`abono_inscripcion`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`abono_inscripcion` (
  `cve_abono_inscripcion` INT NOT NULL AUTO_INCREMENT,
  `fecha_abono_inscripcion` DATE NOT NULL,
  `deposito_abono_inscripcion` FLOAT NOT NULL,
  `detalle_abono_inscripcion` VARCHAR(250) NULL,
  `status_abono_inscripcion` VARCHAR(20) NULL DEFAULT 'active',
  `cve_cuenta_inscripcion` INT NOT NULL,
  `cve_estado_pago` VARCHAR(70) NOT NULL,
  `cve_metodo_pago` VARCHAR(70) NOT NULL,
  `nombre_usuario` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`cve_abono_inscripcion`),
  INDEX `fk_abono_inscripcion_preescolar_cuenta_inscripcion_preescol_idx` (`cve_cuenta_inscripcion` ASC),
  INDEX `fk_abono_inscripcion_preescolar_cat_estado_pago1_idx` (`cve_estado_pago` ASC),
  INDEX `fk_abono_inscripcion_preescolar_cat_metodo_pago1_idx` (`cve_metodo_pago` ASC),
  INDEX `fk_abono_inscripcion_preescolar_usuario1_idx` (`nombre_usuario` ASC),
  CONSTRAINT `fk_abono_inscripcion_preescolar_cuenta_inscripcion_preescolar1`
    FOREIGN KEY (`cve_cuenta_inscripcion`)
    REFERENCES `ssa_jeanpiaget`.`cuenta_inscripcion` (`cve_cuenta_inscripcion`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_abono_inscripcion_preescolar_cat_estado_pago1`
    FOREIGN KEY (`cve_estado_pago`)
    REFERENCES `ssa_jeanpiaget`.`cat_estado_pago` (`cve_estado_pago`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_abono_inscripcion_preescolar_cat_metodo_pago1`
    FOREIGN KEY (`cve_metodo_pago`)
    REFERENCES `ssa_jeanpiaget`.`cat_metodo_pago` (`cve_metodo_pago`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_abono_inscripcion_preescolar_usuario1`
    FOREIGN KEY (`nombre_usuario`)
    REFERENCES `ssa_jeanpiaget`.`usuario` (`nombre_usuario`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'tabla de abonos de inscripcion';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`precio_servicios`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`precio_servicios` (
  `cve_precio_servicios` VARCHAR(70) NOT NULL,
  `titulo_precio_servicios` VARCHAR(100) NOT NULL,
  `monto_precio_servicios` FLOAT NOT NULL,
  `detalle_precio_servicios` VARCHAR(250) NULL,
  `cve_ciclo` VARCHAR(70) NOT NULL,
  `status_precio_servicios` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_precio_servicios`),
  INDEX `fk_precio_servicios_preescolar_ciclo_preescolar1_idx` (`cve_ciclo` ASC),
  CONSTRAINT `fk_precio_servicios_preescolar_ciclo_preescolar1`
    FOREIGN KEY (`cve_ciclo`)
    REFERENCES `ssa_jeanpiaget`.`ciclo` (`cve_ciclo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'tabla de catalogo de servicios';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`cuenta_servicios`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`cuenta_servicios` (
  `cve_cuenta_servicios` INT NOT NULL AUTO_INCREMENT,
  `folio_cuenta_servicios` VARCHAR(70) NOT NULL,
  `fecha_cuenta_servicios` DATE NOT NULL,
  `descripcion_cuenta_servicios` VARCHAR(250) NULL,
  `cve_precio_servicios` VARCHAR(70) NOT NULL,
  `cve_constructor_grupo` VARCHAR(70) NOT NULL,
  `cat_estado_pago_cve_estado_pago` VARCHAR(70) NOT NULL,
  `status_cuenta_servicios` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_cuenta_servicios`),
  INDEX `fk_cuenta_servicios_preescolar_precio_servicios_preescolar1_idx` (`cve_precio_servicios` ASC),
  INDEX `fk_cuenta_servicios_preescolar_constructor_grupo_preescolar_idx` (`cve_constructor_grupo` ASC),
  INDEX `fk_cuenta_servicios_preescolar_cat_estado_pago1_idx` (`cat_estado_pago_cve_estado_pago` ASC),
  CONSTRAINT `fk_cuenta_servicios_preescolar_precio_servicios_preescolar1`
    FOREIGN KEY (`cve_precio_servicios`)
    REFERENCES `ssa_jeanpiaget`.`precio_servicios` (`cve_precio_servicios`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_cuenta_servicios_preescolar_constructor_grupo_preescolar1`
    FOREIGN KEY (`cve_constructor_grupo`)
    REFERENCES `ssa_jeanpiaget`.`constructor_grupo` (`cve_constructor_grupo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_cuenta_servicios_preescolar_cat_estado_pago1`
    FOREIGN KEY (`cat_estado_pago_cve_estado_pago`)
    REFERENCES `ssa_jeanpiaget`.`cat_estado_pago` (`cve_estado_pago`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'tabla de cuenta de servicios';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`abono_servicios`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`abono_servicios` (
  `cve_abono_servicios` INT NOT NULL,
  `fecha_abono_servicios` DATE NOT NULL,
  `deposito_abono_servicios` FLOAT NOT NULL,
  `detalle_abono_servicios` VARCHAR(250) NULL,
  `status_abono_servicios` VARCHAR(20) NULL DEFAULT 'active',
  `cve_cuenta_servicios` INT NOT NULL,
  `cve_estado_pago` VARCHAR(70) NOT NULL,
  `cve_metodo_pago` VARCHAR(70) NOT NULL,
  `nombre_usuario` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`cve_abono_servicios`),
  INDEX `fk_abono_servicios_preescolar_cuenta_servicios_preescolar1_idx` (`cve_cuenta_servicios` ASC),
  INDEX `fk_abono_servicios_preescolar_cat_estado_pago1_idx` (`cve_estado_pago` ASC),
  INDEX `fk_abono_servicios_preescolar_cat_metodo_pago1_idx` (`cve_metodo_pago` ASC),
  INDEX `fk_abono_servicios_preescolar_usuario1_idx` (`nombre_usuario` ASC),
  CONSTRAINT `fk_abono_servicios_preescolar_cuenta_servicios_preescolar1`
    FOREIGN KEY (`cve_cuenta_servicios`)
    REFERENCES `ssa_jeanpiaget`.`cuenta_servicios` (`cve_cuenta_servicios`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_abono_servicios_preescolar_cat_estado_pago1`
    FOREIGN KEY (`cve_estado_pago`)
    REFERENCES `ssa_jeanpiaget`.`cat_estado_pago` (`cve_estado_pago`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_abono_servicios_preescolar_cat_metodo_pago1`
    FOREIGN KEY (`cve_metodo_pago`)
    REFERENCES `ssa_jeanpiaget`.`cat_metodo_pago` (`cve_metodo_pago`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_abono_servicios_preescolar_usuario1`
    FOREIGN KEY (`nombre_usuario`)
    REFERENCES `ssa_jeanpiaget`.`usuario` (`nombre_usuario`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'tabla de abonos a servicios';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`gastos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`gastos` (
  `cve_gasto` INT NOT NULL AUTO_INCREMENT,
  `titulo_gasto` VARCHAR(100) NULL,
  `fecha_gasto` DATE NULL,
  `descripcion_gasto` VARCHAR(250) NULL,
  `monto_gasto` FLOAT NULL,
  `cve_metodo_pago` VARCHAR(70) NOT NULL,
  `cve_ciclo` VARCHAR(70) NOT NULL,
  `status_gasto` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_gasto`),
  INDEX `fk_gastos_cat_metodo_pago1_idx` (`cve_metodo_pago` ASC),
  INDEX `fk_gastos_ciclo1_idx` (`cve_ciclo` ASC),
  CONSTRAINT `fk_gastos_cat_metodo_pago1`
    FOREIGN KEY (`cve_metodo_pago`)
    REFERENCES `ssa_jeanpiaget`.`cat_metodo_pago` (`cve_metodo_pago`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_gastos_ciclo1`
    FOREIGN KEY (`cve_ciclo`)
    REFERENCES `ssa_jeanpiaget`.`ciclo` (`cve_ciclo`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'tabla de gastos';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`categoria_producto`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`categoria_producto` (
  `cve_categoria` VARCHAR(70) NOT NULL,
  `nombre_categoria` VARCHAR(100) NULL,
  `detalle_categoria` VARCHAR(200) NULL,
  `cve_campus` VARCHAR(70) NOT NULL,
  `status_categoria` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_categoria`),
  INDEX `fk_categoria_producto_campus1_idx` (`cve_campus` ASC),
  CONSTRAINT `fk_categoria_producto_campus1`
    FOREIGN KEY (`cve_campus`)
    REFERENCES `ssa_jeanpiaget`.`campus` (`cve_campus`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'tabla de categoria de los productos';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`productos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`productos` (
  `cve_producto` INT NOT NULL AUTO_INCREMENT,
  `titulo_producto` VARCHAR(100) NOT NULL,
  `detalle_producto` VARCHAR(200) NULL,
  `descripcion_producto` VARCHAR(250) NULL,
  `precio_producto` FLOAT NOT NULL,
  `existencia_producto` INT NOT NULL,
  `cve_categoria` VARCHAR(70) NOT NULL,
  `status_producto` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_producto`),
  INDEX `fk_productos_categoria_producto1_idx` (`cve_categoria` ASC),
  CONSTRAINT `fk_productos_categoria_producto1`
    FOREIGN KEY (`cve_categoria`)
    REFERENCES `ssa_jeanpiaget`.`categoria_producto` (`cve_categoria`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'tabla de productos';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`cuenta_ventas`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`cuenta_ventas` (
  `cve_cuenta_venta` INT NOT NULL AUTO_INCREMENT,
  `folio_cuenta_venta` VARCHAR(70) NOT NULL,
  `nombre_cuenta_venta` VARCHAR(200) NOT NULL,
  `fecha_cuenta_venta` DATE NOT NULL,
  `descripcion_cuenta_venta` VARCHAR(250) NULL,
  `cve_estado_pago` VARCHAR(70) NOT NULL,
  `status_cuenta_venta` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_cuenta_venta`),
  INDEX `fk_cuenta_ventas_cat_estado_pago1_idx` (`cve_estado_pago` ASC),
  CONSTRAINT `fk_cuenta_ventas_cat_estado_pago1`
    FOREIGN KEY (`cve_estado_pago`)
    REFERENCES `ssa_jeanpiaget`.`cat_estado_pago` (`cve_estado_pago`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'tabla de cuentas de las ventas en la tienda';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`rel_ventas_producto`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`rel_ventas_producto` (
  `cve_rel_ventas_producto` INT NOT NULL AUTO_INCREMENT,
  `cve_producto` INT NOT NULL,
  `cve_cuenta_venta` INT NOT NULL,
  `status_rel_ventas_producto` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_rel_ventas_producto`),
  INDEX `fk_rel_ventas_producto_productos1_idx` (`cve_producto` ASC),
  INDEX `fk_rel_ventas_producto_cuenta_ventas1_idx` (`cve_cuenta_venta` ASC),
  CONSTRAINT `fk_rel_ventas_producto_productos1`
    FOREIGN KEY (`cve_producto`)
    REFERENCES `ssa_jeanpiaget`.`productos` (`cve_producto`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_rel_ventas_producto_cuenta_ventas1`
    FOREIGN KEY (`cve_cuenta_venta`)
    REFERENCES `ssa_jeanpiaget`.`cuenta_ventas` (`cve_cuenta_venta`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'tabla de relaciones de cuentas ventas al producto';


-- -----------------------------------------------------
-- Table `ssa_jeanpiaget`.`abono_ventas`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ssa_jeanpiaget`.`abono_ventas` (
  `cve_abono_venta` INT NOT NULL AUTO_INCREMENT,
  `fecha_abono_venta` DATE NOT NULL,
  `deposito_abono_venta` FLOAT NOT NULL,
  `detalle_abono_venta` VARCHAR(250) NULL,
  `cve_cuenta_venta` INT NOT NULL,
  `cve_estado_pago` VARCHAR(70) NOT NULL,
  `cve_metodo_pago` VARCHAR(70) NOT NULL,
  `nombre_usuario` VARCHAR(100) NOT NULL,
  `status_abono_venta` VARCHAR(20) NULL DEFAULT 'active',
  PRIMARY KEY (`cve_abono_venta`),
  INDEX `fk_abono_ventas_cuenta_ventas1_idx` (`cve_cuenta_venta` ASC),
  INDEX `fk_abono_ventas_cat_estado_pago1_idx` (`cve_estado_pago` ASC),
  INDEX `fk_abono_ventas_cat_metodo_pago1_idx` (`cve_metodo_pago` ASC),
  INDEX `fk_abono_ventas_usuario1_idx` (`nombre_usuario` ASC),
  CONSTRAINT `fk_abono_ventas_cuenta_ventas1`
    FOREIGN KEY (`cve_cuenta_venta`)
    REFERENCES `ssa_jeanpiaget`.`cuenta_ventas` (`cve_cuenta_venta`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_abono_ventas_cat_estado_pago1`
    FOREIGN KEY (`cve_estado_pago`)
    REFERENCES `ssa_jeanpiaget`.`cat_estado_pago` (`cve_estado_pago`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_abono_ventas_cat_metodo_pago1`
    FOREIGN KEY (`cve_metodo_pago`)
    REFERENCES `ssa_jeanpiaget`.`cat_metodo_pago` (`cve_metodo_pago`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `fk_abono_ventas_usuario1`
    FOREIGN KEY (`nombre_usuario`)
    REFERENCES `ssa_jeanpiaget`.`usuario` (`nombre_usuario`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
COMMENT = 'tabla de abonos en ventas';


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
